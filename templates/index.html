<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jellyfin & Stash Video Player</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .playlist {
            max-width: 800px;
            margin: 0 auto;
        }
        .video-item {
            padding: 10px;
            background-color: #333;
            margin-bottom: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .video-item:hover {
            background-color: #444;
        }
        .video-player {
            max-width: 800px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <h1>Jellyfin & Stash Video Player</h1>
    <div class="video-player">
        <video id="player" class="video-js vjs-default-skin" controls preload="auto" width="100%">
            <source id="video-source" src="" type="">
            Your browser does not support the video tag.
        </video>
    </div>
    <div class="playlist">
        {% for item in items %}
        <div class="video-item" onclick="playVideo('{{ item.url }}', '{{ item.name }}', '{{ item.type }}')">
            {{ item.name }}
        </div>
        {% endfor %}
    </div>

    <script src="https://vjs.zencdn.net/7.20.3/video.js"></script>
    <script>
        const player = videojs('player');
        
        function playVideo(url, name, type) {
            const source = document.getElementById('video-source');
            source.src = url;
            player.src({ src: url, type: type });
            player.play();
            document.title = `Playing: ${name}`;
        }

        // Autoplay the first video if available
        {% if items %}
            playVideo('{{ items[0].url }}', '{{ items[0].name }}', '{{ items[0].type }}');
        {% endif %}
    </script>
</body>
</html>
